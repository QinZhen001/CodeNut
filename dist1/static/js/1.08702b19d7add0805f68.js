webpackJsonp([1,8],{578:function(t,e,a){a(601);var i=a(9)(a(597),a(604),null,null);t.exports=i.exports},579:function(t,e,a){a(640);var i=a(9)(a(610),a(665),"data-v-7162950d",null);t.exports=i.exports},597:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{username:"",password:"",email:"",school:"",occupation:""}},methods:{register:function(){var t=this;this.$http.post("https://api.txdna.cn/users",{username:this.username,password:this.password,email:this.email,school:this.school,occupation:this.occupation}).then(function(e){console.log(e.body),"ok"===e.body.msg?(t.$toast({message:"注册成功",position:"bottom",iconClass:"icon icon-ok"}),t.$router.push({path:"/aboutme"})):"no"===e.body.msg&&(t.$toast({message:"该用户已存在",position:"bottom",iconClass:"icon icon-delete"}),t.username="",t.$refs.username.focus())},function(e){console.log(e),t.$toast({message:"注册失败",position:"bottom",iconClass:"icon icon-delete"})})}},watch:{username:function(t){console.log(t),t.length<6&&(this.$toast({message:"用户名过短,请重新输入",position:"bottom"}),this.username="",this.$refs.username.focus())},password:function(t){t.length<6&&(this.$toast({message:"密码过短,请重新输入",position:"bottom"}),this.password="",this.$refs.password.focus())},email:function(t){new RegExp("([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+").test(t)||(this.$toast({message:"请输入正确的邮箱",position:"bottom"}),this.email="",this.$refs.email.focus())}}}},599:function(t,e,a){e=t.exports=a(576)(!1),e.push([t.i,".register{position:fixed;left:0;right:0;top:0;bottom:0;z-index:1000;background-color:#222;text-align:center}.register .input-wrapper{margin:30px 0;text-align:center}.register .input-wrapper .input-item{width:80%;height:40px;margin-bottom:15px;padding-left:10px;border:1px solid #fff;border-radius:4px;color:#fff;background-color:#222}.register .btn-register{width:70%;margin:0 auto}.slide-enter-active,.slide-leave-active{transition:all .3s}.slide-enter,.slide-leave-to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}",""])},601:function(t,e,a){var i=a(599);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(577)("69ad3225",i,!0)},604:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{staticClass:"register"},[a("mt-header",{attrs:{title:"注册"}},[a("router-link",{attrs:{to:"/search"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)],1),t._v(" "),a("div",{staticClass:"input-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.username,expression:"username",modifiers:{trim:!0,lazy:!0}}],ref:"username",staticClass:"input-item",attrs:{placeholder:"请输入用户名",type:"text"},domProps:{value:t.username},on:{change:function(e){t.username=e.target.value.trim()},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.password,expression:"password",modifiers:{trim:!0,lazy:!0}}],ref:"password",staticClass:"input-item",attrs:{placeholder:"请输入密码",type:"password"},domProps:{value:t.password},on:{change:function(e){t.password=e.target.value.trim()},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.email,expression:"email",modifiers:{trim:!0,lazy:!0}}],ref:"email",staticClass:"input-item",attrs:{placeholder:"请输入邮箱",type:"text"},domProps:{value:t.email},on:{change:function(e){t.email=e.target.value.trim()},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.school,expression:"school",modifiers:{trim:!0,lazy:!0}}],ref:"school",staticClass:"input-item",attrs:{placeholder:"请输入学校",type:"text"},domProps:{value:t.school},on:{change:function(e){t.school=e.target.value.trim()},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.occupation,expression:"occupation",modifiers:{trim:!0,lazy:!0}}],ref:"occupation",staticClass:"input-item",attrs:{placeholder:"请输入职业",type:"text"},domProps:{value:t.occupation},on:{change:function(e){t.occupation=e.target.value.trim()},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("mt-button",{staticClass:"btn-register",attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.register(e)}}},[t._v("注册")])],1)])},staticRenderFns:[]}},608:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},610:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(127),o=a.n(i),s=a(205),r=a.n(s),n=a(658),l=a.n(n),c=a(578),p=a.n(c),d=a(656),u=a.n(d),m=a(203),g=a.n(m),f=a(131);e.default={data:function(){return{user:{},isLogin:!1}},methods:{login:function(){this.isLogin||this._showLoginDialog()},_showLoginDialog:function(){this.$refs.loginDialog.show()},afterLogin:function(t){var e=this;console.log(t),r.a.interceptors.request.use(function(e){return e.headers.token=a.i(f.j)(),e.auth={username:t.username,password:t.password},e},function(t){return o.a.reject(t)});var i="https://api.txdna.cn/users/"+t.id;r.a.get(i).then(function(t){console.log(t),e.user.id=t.data.id,e.user.username=t.data.username,e.user.realname=t.data.realname,e.user.email=t.data.email,e.user.school=t.data.school,e.user.occupation=t.data.occupation,e.user.company=t.data.company,e.user.profile=t.data.profile,e.user.about_me=t.data.about_me,console.log(e.user),e.isLogin=!0},function(t){console.log(t)})},registerUser:function(){this.$router.push({path:"/register"})},onClickQuit:function(){this.$refs.logoffDialog.show()},quit:function(){a.i(f.k)(),a.i(f.l)(),r.a.interceptors.request.use(function(t){return t.headers.token="",t.auth={},t},function(t){return o.a.reject(t)}),this.isLogin=!1}},components:{LoginDialog:l.a,Register:p.a,Split:u.a,Confirm:g.a}}},611:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(131);e.default={data:function(){return{showFlag:!1,username:"",password:""}},methods:{show:function(){this.showFlag=!0},hide:function(){this.showFlag=!1},cancel:function(){this.hide()},confirm:function(){var t=this;this.$http.post("https://api.txdna.cn/tokens",{username:this.username,password:this.password}).then(function(e){console.log(e.body),a.i(i.m)(e.body.token),a.i(i.n)(e.body.id);var o={};o.id=e.body.id,o.username=t.username,o.password=t.password,t.$emit("loginsucceed",o),t.$toast({message:"登录成功",position:"bottom",iconClass:"icon icon-ok"})},function(e){console.log(e),t.$toast({message:"登录失败",position:"bottom",iconClass:"icon icon-delete"})}),console.log(this.username),console.log(this.password),this.hide()},registerUser:function(){this.hide(),this.$emit("register")}}}},623:function(t,e,a){e=t.exports=a(576)(!1),e.push([t.i,".split{width:100%;height:16px;border-top:1px solid rgba(7,17,27,.1);border-bottom:1px solid rgba(7,17,27,.1);background:#ddd}",""])},626:function(t,e,a){e=t.exports=a(576)(!1),e.push([t.i,".user[data-v-7162950d]{position:fixed;width:100%;top:88px;bottom:0}.user .header-wraper[data-v-7162950d]{display:-webkit-box;display:-ms-flexbox;display:flex;height:65px;width:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#27ae60;border-bottom:1px solid #ddd}.user .header-wraper .avatar-wrapper[data-v-7162950d]{padding-left:20px;padding-right:8px;-webkit-box-flex:0;-ms-flex:0 0 50px;flex:0 0 50px;width:50px}.user .header-wraper .avatar-wrapper .avatar[data-v-7162950d]{border-radius:50%}.user .header-wraper .text-wrapper[data-v-7162950d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-flex:1;-ms-flex:1;flex:1}.user .content-wrapper[data-v-7162950d]{padding:0 5px}.user .content-wrapper .item-wrapper[data-v-7162950d]{width:100%;height:50px;border-bottom:1px solid #ddd}.user .content-wrapper .item-wrapper .text[data-v-7162950d]{margin-left:8px;display:inline-block;position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.user .content-wrapper .item-wrapper .value[data-v-7162950d]{display:inline-block;position:relative;top:50%;float:right;margin-right:5px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.user .quit-wrapper[data-v-7162950d]{margin-top:40px;width:100%;text-align:center}.user .quit-wrapper .btn-quit[data-v-7162950d]{width:80%}",""])},627:function(t,e,a){e=t.exports=a(576)(!1),e.push([t.i,".dialog{position:fixed;left:0;right:0;top:0;bottom:0;z-index:998;background-color:rgba(0,0,0,.3)}.dialog.dialog-fade-enter-active{-webkit-animation:dialog-fadein .3s;animation:dialog-fadein .3s}.dialog .dialog-content{-webkit-animation:dialog-zoom .3s;animation:dialog-zoom .3s}.dialog .dialog-wrapper{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:999}.dialog .dialog-wrapper .dialog-content{width:270px;border-radius:13px;background:#333}.dialog .dialog-wrapper .dialog-content .dialog-title{padding:10px 0 8px;width:100%;text-align:center;color:#ffcd32;font-size:$font-size-large-l;border-bottom:1px solid rgba(0,0,0,.3)}.dialog .dialog-wrapper .dialog-content .input-wrapper{width:270px}.dialog .dialog-wrapper .dialog-content .input-wrapper .text-input{height:32px;width:100%;background-color:#333;color:#fff;border-bottom:1px solid rgba(0,0,0,.3);font-family:sans-serif}.dialog .dialog-wrapper .dialog-content .operate{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;font-size:18px}.dialog .dialog-wrapper .dialog-content .operate .operate-btn{-webkit-box-flex:1;-ms-flex:1;flex:1;line-height:22px;padding:10px 0;border-bottom:1px solid rgba(0,0,0,.3);color:hsla(0,0%,100%,.3)}.dialog .dialog-wrapper .dialog-content .operate .operate-btn.left{border-right:1px solid rgba(0,0,0,.3);color:#ffcd32}.dialog .dialog-wrapper .dialog-content .text-register{padding:10px 0 8px;width:100%;text-align:center}.mask{position:fixed;top:0;left:0;width:100%;height:100%;z-index:200;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);opacity:1;background:rgba(7,17,27,.6)}.mask.fade-enter-active,.mask.fade-leave-active{transition:all .5s}.mask.fade-enter,.mask.fade-leave-active{opacity:0;background:rgba(7,17,27,0)}@-webkit-keyframes dialog-fadein{0%{opacity:0}to{opacity:1}}@keyframes dialog-fadein{0%{opacity:0}to{opacity:1}}@-webkit-keyframes dialog-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes dialog-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}",""])},637:function(t,e,a){var i=a(623);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(577)("75dbef76",i,!0)},640:function(t,e,a){var i=a(626);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(577)("584b62db",i,!0)},641:function(t,e,a){var i=a(627);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(577)("7c528eec",i,!0)},656:function(t,e,a){a(637);var i=a(9)(a(608),a(662),null,null);t.exports=i.exports},658:function(t,e,a){a(641);var i=a(9)(a(611),a(666),null,null);t.exports=i.exports},662:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"split"})},staticRenderFns:[]}},665:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user"},[i("div",{staticClass:"header-wraper"},[i("div",{staticClass:"avatar-wrapper"},[i("img",{staticClass:"avatar",attrs:{width:"50",height:"50",src:a(132)},on:{click:function(e){e.stopPropagation(),t.login(e)}}})]),t._v(" "),i("div",{staticClass:"text-wrapper"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}],staticClass:"text-login",on:{click:function(e){e.stopPropagation(),t.login(e)}}},[t._v("请点击登录")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"text-login"},[t._v(t._s(t.user.username))])])]),t._v(" "),i("div",{staticClass:"content-wrapper"},[i("div",{staticClass:"item-wrapper"},[i("span",{staticClass:"text"},[t._v("邮箱")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"value"},[t._v(t._s(t.user.email))])]),t._v(" "),i("div",{staticClass:"item-wrapper"},[i("span",{staticClass:"text"},[t._v("学校")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"value"},[t._v(t._s(t.user.school))])]),t._v(" "),i("div",{staticClass:"item-wrapper"},[i("span",{staticClass:"text"},[t._v("职业")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"value"},[t._v(t._s(t.user.occupation))])]),t._v(" "),i("div",{staticClass:"item-wrapper"},[i("span",{staticClass:"text"},[t._v("公司")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"value"},[t._v(t._s(t.user.company))])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"quit-wrapper"},[i("mt-button",{staticClass:"btn-quit",attrs:{type:"danger"},on:{click:function(e){e.stopPropagation(),t.onClickQuit(e)}}},[t._v("退出登录")])],1),t._v(" "),i("confirm",{ref:"logoffDialog",attrs:{text:"是否注销该用户?"},on:{confirm:t.quit}}),t._v(" "),i("login-dialog",{ref:"loginDialog",on:{loginsucceed:t.afterLogin,register:t.registerUser}}),t._v(" "),i("router-view")],1)},staticRenderFns:[]}},666:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"dialog-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"dialog",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"dialog-wrapper"},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"dialog-title"},[t._v("CodeNut")]),t._v(" "),a("div",{staticClass:"input-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"text-input",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text-input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"operate"},[a("div",{staticClass:"operate-btn left",on:{click:t.confirm}},[t._v("登录")]),t._v(" "),a("div",{staticClass:"operate-btn",on:{click:t.cancel}},[t._v("取消")])]),t._v(" "),a("div",{staticClass:"text-register",on:{click:function(e){e.stopPropagation(),t.registerUser(e)}}},[t._v("去注册")])])])])]),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"mask"})])],1)},staticRenderFns:[]}}});