webpackJsonp([7],{XET2:function(n,e,a){e=n.exports=a("FZ+f")(!0),e.push([n.i,".manager-login[data-v-4be0d82a]{position:fixed;width:100%;height:100%;z-index:300;background-color:#324157}.manager-login .ms-title[data-v-4be0d82a]{position:absolute;top:50%;width:100%;margin-top:-230px;text-align:center;font-size:30px;color:#fff}.manager-login .ms-login[data-v-4be0d82a]{position:absolute;left:50%;top:50%;width:300px;height:160px;margin:-150px 0 0 -190px;padding:40px;border-radius:5px;background:#fff}.manager-login .ms-login .el-form-item[data-v-4be0d82a]{margin-bottom:20px}.manager-login .ms-login .login-btn[data-v-4be0d82a]{text-align:center;margin-top:5px}.manager-login .ms-login .login-btn button[data-v-4be0d82a]{width:100%;height:36px}","",{version:3,sources:["E:/前端/bootstrap学习/codeproject/src/components/manager/manager-login.vue"],names:[],mappings:"AACA,gCACE,eAAgB,AAChB,WAAY,AACZ,YAAa,AACb,YAAa,AACb,wBAA0B,CAC3B,AACD,0CACE,kBAAmB,AACnB,QAAS,AACT,WAAY,AACZ,kBAAmB,AACnB,kBAAmB,AACnB,eAAgB,AAChB,UAAY,CACb,AACD,0CACE,kBAAmB,AACnB,SAAU,AACV,QAAS,AACT,YAAa,AACb,aAAc,AACd,yBAA0B,AAC1B,aAAc,AACd,kBAAmB,AACnB,eAAiB,CAClB,AACD,wDACE,kBAAoB,CACrB,AACD,qDACE,kBAAmB,AACnB,cAAgB,CACjB,AACD,4DACE,WAAY,AACZ,WAAa,CACd",file:"manager-login.vue",sourcesContent:["\n.manager-login[data-v-4be0d82a] {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  z-index: 300;\n  background-color: #324157;\n}\n.manager-login .ms-title[data-v-4be0d82a] {\n  position: absolute;\n  top: 50%;\n  width: 100%;\n  margin-top: -230px;\n  text-align: center;\n  font-size: 30px;\n  color: #fff;\n}\n.manager-login .ms-login[data-v-4be0d82a] {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 300px;\n  height: 160px;\n  margin: -150px 0 0 -190px;\n  padding: 40px;\n  border-radius: 5px;\n  background: #fff;\n}\n.manager-login .ms-login .el-form-item[data-v-4be0d82a] {\n  margin-bottom: 20px;\n}\n.manager-login .ms-login .login-btn[data-v-4be0d82a] {\n  text-align: center;\n  margin-top: 5px;\n}\n.manager-login .ms-login .login-btn button[data-v-4be0d82a] {\n  width: 100%;\n  height: 36px;\n}"],sourceRoot:""}])},Zdwp:function(n,e,a){var o=a("XET2");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);a("rjj0")("33a9ac82",o,!0)},imfC:function(n,e,a){"use strict";function o(n){a("Zdwp")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("mgYX"),t=a("z+FT"),i=a("VU/8"),s=o,g=i(r.a,t.a,s,"data-v-4be0d82a",null);e.default=g.exports},mgYX:function(n,e,a){"use strict";var o=a("//Fk"),r=a.n(o),t=a("Dd8w"),i=a.n(t),s=a("mtWM"),g=a.n(s),m=a("Kf/3"),l=a("DW9A"),A=a("NYxO"),u=a("jCJf");e.a={data:function(){return{mangerLoginForm:{username:"",password:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:5,message:"用户名过短",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:5,message:"密码过短",trigger:"blur"}]}}},created:function(){this.mangerLoginForm.username="",this.mangerLoginForm.password=""},methods:i()({submitForm:function(n){var e=this;this.$refs[n].validate(function(n){if(!n)return console.log("error submit!!"),!1;e._loginManager()})},_loginManager:function(){var n=this,e=l.a+"/tokens";g.a.post(e,{username:this.mangerLoginForm.username,password:this.mangerLoginForm.password}).then(function(e){e.data.msg===l.b&&(n.FindUserInfo(e.data.result[0].id),"user"!==n.user.role?(a.i(m.a)(e.data.result[0].token),n._changeAxiosInterceptor(),n.$notify({title:"成功",message:"管理员登录成功",type:"success"}),n.$router.push("/home/manager")):n.$notify({title:"错误",message:"此用户不是管理员",type:"error"}))},function(e){console.log(e),n.$notify.error({title:"错误",message:"登录失败"}),n.mangerLoginForm.username="",n.mangerLoginForm.password=""})},_changeAxiosInterceptor:function(){var n=this;console.log(a.i(m.b)()),console.log(this.mangerLoginForm),g.a.interceptors.request.use(function(e){return e.headers.token=a.i(m.b)(),e.auth={username:n.mangerLoginForm.username,password:n.mangerLoginForm.password},e},function(n){return r.a.reject(n)})},FindUserInfo:function(n){var e=this;console.log(n);var a=l.a+"/users/"+n;g.a.get(a).then(function(n){n.data.msg===l.b&&"user"!==n.data.result[0].role&&e.saveOneUser(new u.a(n.data.result[0]))},function(n){})}},a.i(A.b)(["saveOneUser"])),computed:i()({},a.i(A.c)(["user"]))}},"z+FT":function(n,e,a){"use strict";var o=function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",{staticClass:"manager-login"},[a("div",{staticClass:"ms-title"},[n._v("CodeNut管理员后台")]),n._v(" "),a("div",{staticClass:"ms-login"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.mangerLoginForm,rules:n.rules,"label-width":"0px"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入管理员账号"},model:{value:n.mangerLoginForm.username,callback:function(e){n.mangerLoginForm.username=e},expression:"mangerLoginForm.username"}})],1),n._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入管理员密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13))return null;n.submitForm("ruleForm")}},model:{value:n.mangerLoginForm.password,callback:function(e){n.mangerLoginForm.password=e},expression:"mangerLoginForm.password"}})],1),n._v(" "),a("div",{staticClass:"login-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){n.submitForm("ruleForm")}}},[n._v("登录")])],1)],1)],1)])},r=[],t={render:o,staticRenderFns:r};e.a=t}});
//# sourceMappingURL=7.22cb303cc36674d07c97.js.map