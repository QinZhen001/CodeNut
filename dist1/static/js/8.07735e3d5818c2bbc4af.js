webpackJsonp([8],{"23P/":function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,".manage-contests .el-dialog .block .el-date-editor[data-v-5f3552e8]{width:100%}.manage-contests .handle-box[data-v-5f3552e8]{margin-bottom:15px}.manage-contests .pagination[data-v-5f3552e8]{margin:20px 0;text-align:right}.autojoin-item[data-v-5f3552e8]{margin-bottom:0}.password-item[data-v-5f3552e8]{padding:10px 0 0;margin-bottom:0}.password-item .password-input[data-v-5f3552e8]{margin-left:15px;width:50%}","",{version:3,sources:["E:/前端/bootstrap学习/codeproject/src/components/manager/manage-contests.vue"],names:[],mappings:"AACA,oEACE,UAAY,CACb,AACD,8CACE,kBAAoB,CACrB,AACD,8CACE,cAAe,AACf,gBAAkB,CACnB,AACD,gCACE,eAAiB,CAClB,AACD,gCACE,iBAAoB,AACpB,eAAiB,CAClB,AACD,gDACE,iBAAkB,AAClB,SAAW,CACZ",file:"manage-contests.vue",sourcesContent:["\n.manage-contests .el-dialog .block .el-date-editor[data-v-5f3552e8] {\n  width: 100%;\n}\n.manage-contests .handle-box[data-v-5f3552e8] {\n  margin-bottom: 15px;\n}\n.manage-contests .pagination[data-v-5f3552e8] {\n  margin: 20px 0;\n  text-align: right;\n}\n.autojoin-item[data-v-5f3552e8] {\n  margin-bottom: 0;\n}\n.password-item[data-v-5f3552e8] {\n  padding: 10px 0 0 0;\n  margin-bottom: 0;\n}\n.password-item .password-input[data-v-5f3552e8] {\n  margin-left: 15px;\n  width: 50%;\n}"],sourceRoot:""}])},"4Ggt":function(t,e,a){"use strict";function i(t){a("Kruu")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("To19"),n=a("6/k5"),o=a("VU/8"),l=i,r=o(s.a,n.a,l,"data-v-5f3552e8",null);e.default=r.exports},"6/k5":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manage-contests"},[a("el-dialog",{attrs:{title:"创建比赛",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{spellcheck:"false"},model:{value:t.form.title,callback:function(e){t.form.title=e},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{attrs:{spellcheck:"false",type:"textarea",rows:5},model:{value:t.form.description,callback:function(e){t.form.description=e},expression:"form.description"}})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":t.pickerOptions,placeholder:"选择时间范围",align:"right"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("el-form-item",{staticClass:"autojoin-item"},[a("el-checkbox",{model:{value:t.isAutoJoin,callback:function(e){t.isAutoJoin=e},expression:"isAutoJoin"}},[t._v("自动批准用户加入")])],1),t._v(" "),a("el-form-item",{staticClass:"password-item",attrs:{prop:"password"}},[a("div",[a("el-checkbox",{staticClass:"password-checkbox",model:{value:t.canPassword,callback:function(e){t.canPassword=e},expression:"canPassword"}},[t._v("设置比赛密码")]),t._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.canPassword,expression:"canPassword"}],staticClass:"password-input",attrs:{spellcheck:"false"},model:{value:t.form.password,callback:function(e){t.form.password=e},expression:"form.password"}})],1)])],1),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.setupContest}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:t.showSetupContestDialog}},[t._v("创建比赛")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.contestDatas,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",sortable:"",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述",width:"330"}}),t._v(" "),a("el-table-column",{attrs:{prop:"start_time",label:"开始时间",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"end_time",label:"结束时间",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sponsor",label:"举办者",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_nums",label:"参加人数",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑\n        ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:100},on:{"current-change":t.handleCurrentChange}})],1)],1)},s=[],n={render:i,staticRenderFns:s};e.a=n},Kruu:function(t,e,a){var i=a("23P/");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("b440bf8c",i,!0)},To19:function(t,e,a){"use strict";var i=a("DW9A"),s=a("mtWM"),n=a.n(s),o=a("95Re");e.a={components:{ElFormItem:o.a},data:function(){return{dialogFormVisible:!1,form:{title:"",description:"",password:""},contestDatas:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"},{min:5,message:"标题过短",trigger:"blur"}],description:[{required:!0,message:"描述不能为空",trigger:"blur"},{min:5,message:"描述过短",trigger:"blur"}]},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},date:"",canPassword:!1,isAutoJoin:!0}},created:function(){this.getData(this.cur_page)},methods:{showSetupContestDialog:function(){this.title="",this.description="",this.dialogFormVisible=!0},handleCurrentChange:function(t){this.cur_page=t,this.getData(this.cur_page)},getData:function(t){var e=this,a=i.a+"/contests";n.a.get(a).then(function(t){t.data.msg===i.b&&(e.contestDatas=t.data.result)},function(t){})},formatter:function(t,e){return t.address},filterTag:function(t,e){return e.tag===t},handleEdit:function(t,e){this.$message("编辑第"+(t+1)+"行")},handleDelete:function(t,e){var a=this,s=i.a+"/contests/"+e.id;n.a.delete(s).then(function(t){"ok"===t.data.msg&&(a.getData(a.cur_page),a.$message({message:"成功删除比赛:"+e.title,type:"success"}))},function(t){a.$message.error("无法删除比赛"+e.title)})},delAll:function(){var t=this,e=t.multipleSelection.length,a="";t.del_list=t.del_list.concat(t.multipleSelection);for(var i=0;i<e;i++)a+=t.multipleSelection[i].name+" ";t.$message.error("删除了"+a),t.multipleSelection=[]},handleSelectionChange:function(t){this.multipleSelection=t},setupContest:function(){var t=this;console.log(this.date);var e=i.a+"/contests";n.a.post(e,{title:this.form.title,description:this.form.description,start_time:"2017-09-25 07:24:41",end_time:"2017-12-25 07:24:41",password:this.form.password,auto_approve:this.isAutoJoin}).then(function(e){e.data.msg===i.b?(t.$notify({title:"成功",message:"创建比赛成功",type:"success"}),t.dialogFormVisible=!1):t.$notify({title:"失败",message:"创建比赛失败",type:"error"})},function(t){})}},computed:{data:function(){var t=this;return t.contestDatas.filter(function(e){for(var a=!1,i=0;i<t.del_list.length;i++)if(e.name===t.del_list[i].name){a=!0;break}if(!a&&e.address.indexOf(t.select_cate)>-1&&(e.name.indexOf(t.select_word)>-1||e.address.indexOf(t.select_word)>-1))return e})}}}}});
//# sourceMappingURL=8.07735e3d5818c2bbc4af.js.map